generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Livro {
  id            Int        @id @default(autoincrement())
  titulo        String     @db.VarChar(200)
  autor         String     @db.VarChar(100)
  isbn          String     @unique @db.VarChar(20)
  editora       String     @db.VarChar(100)
  anoPublicacao Int
  genero        String     @db.VarChar(50)
  sinopse       String     @db.Text
  paginas       Int
  idioma        String     @db.VarChar(30)
  dataCadastro  DateTime   @default(now())
  registros     Registro[]
}

model Usuario {
  id           Int         @id @default(autoincrement())
  nome         String      @db.VarChar(100)
  email        String      @unique @db.VarChar(100)
  senha        String      @db.VarChar(255)
  tipo         TipoUsuario @default(COMUM)
  dataCadastro DateTime    @default(now())
  registros    Registro[]
}

model Registro {
  id              Int           @id @default(autoincrement())
  livroId         Int
  usuarioId       Int
  comentario      String?       @db.Text
  statusLeitura   StatusLeitura
  totalPaginas    Int?
  paginaAtual     Int?
  dataAtualizacao DateTime      @default(now())
}

enum TipoUsuario {
  ADMIN
  COMUM
}

enum StatusLeitura {
  LIDO
  LENDO
  RELENDO
  QUERO_LER
  ABANDONADO
}
